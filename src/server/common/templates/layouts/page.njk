{% extends "govuk/template.njk" %}

{# Import GOVUK components globally #}
{% from "govuk/components/breadcrumbs/macro.njk" import govukBreadcrumbs %}
{% from "govuk/components/phase-banner/macro.njk" import govukPhaseBanner %}
{% from "govuk/components/service-navigation/macro.njk" import govukServiceNavigation %}

{# Import custom components globally #}
{% from "heading/macro.njk" import appHeading %}
{% from "back-link-history/macro.njk" import appBackLinkHistory %}
{% from "organisation-heading/macro.njk" import appOrganisationHeading %}
{% from "contact-details/macro.njk" import appContactDetails %}

{% set mainClasses = "app-main-wrapper" %}

{% block head %}
  <link href="{{ getAssetPath('stylesheets/application.scss') }}" rel="stylesheet">
  {% if clarityProjectId %}
    <script nonce='{{ cspNonce }}'>
      window.CLARITY_PROJECT_ID = "{{ clarityProjectId }}";
      window.ANALYTICS_ENABLED = {{ analyticsEnabled | dump }};
    </script>
  {% endif %}

    <noscript>
    <style>
      .hide-if-no-js {display:none !important;}
    </style>
  </noscript>

{% endblock %}

{% block header %}
  {% include "partials/cookie-banner.njk" %}

  {{ govukHeader({
    homepageUrl: "https://www.gov.uk/",
    classes: "govuk-header--full-width-border",
    serviceUrl: serviceUrl,
    useTudorCrown: true
  }) }}

  {{ govukServiceNavigation({
    serviceName: serviceName,
    navigation: navigation
  }) }}
{% endblock %}

{% block pageTitle %}
  {% if errors %}
    Error:
  {% endif %}
  {{ pageTitle }} - {{ serviceName }}
{% endblock %}

{% block beforeContent %}
  {% if breadcrumbs.length > 1 %}
    {{ govukBreadcrumbs({
      items: breadcrumbs
    }) }}
  {% endif %}
<div role="complementary">
  {{ govukPhaseBanner({
    tag: {
      text: "Beta"
      },
    html: 'This is a new service. Help us improve it and <a class="govuk-link" target="_blank" rel="noopener noreferrer" href="https://defragroup.eu.qualtrics.com/jfe/form/SV_8p5Cle8p7Yov9FI">give your feedback (opens in new tab)</a>.'
  }) }}
  </div>
  {{ appOrganisationHeading({
    orgOrUserName: commonPageViewData.orgOrUserName,
    showChangeOrganisationLink: commonPageViewData.showChangeOrganisationLink
  }) }}
{% endblock %}

{% block content %}{% endblock %}

{% block footer %}
  {{ govukFooter({
    meta: {
      items: [
        {
          href: "/help/privacy",
          text: "Privacy"
        },
        {
          href: "/help/cookies",
          text: "Cookies"
        }
      ]
    }
  }) }}
{% endblock %}

{% block bodyEnd %}
  <script type="module" src="{{ getAssetPath('application.js') }}"></script>
{% endblock %}
