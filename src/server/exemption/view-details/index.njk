{% extends 'layouts/page.njk' %}
{% from "govuk/components/back-link/macro.njk" import govukBackLink %}
{% from "site-details-data-script/macro.njk" import appSiteDetailsDataScript %}
{% from "application-details-card/macro.njk" import appApplicationDetailsCard %}
{% from "project-details-card/macro.njk" import appProjectDetailsCard %}
{% from "activity-dates-card/macro.njk" import appActivityDatesCard %}
{% from "activity-details-card/macro.njk" import appActivityDetailsCard %}
{% from "site-details-card/macro.njk" import appSiteDetailsCard %}
{% from "public-register-card/macro.njk" import appPublicRegisterCard %}

{% block pageTitle %}
  {{ title }} - {{ serviceName }}
{% endblock %}
{% block head %}
  {{ super() }}
  {{ appSiteDetailsDataScript(siteDetailsData) }}
{% endblock %}

{% block beforeContent %}
  {{ super() }}
  {%  if backLink %}
  <nav>
    {{ govukBackLink({
          text: "Back",
          href: backLink
      }) }}
  </nav>
  {% endif %}
{% endblock %}

{% block content %}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-full">

    {% if pageCaption %}
      <span class="govuk-caption-l">{{ pageCaption }}</span>
    {% endif %}

    <h1 class="govuk-heading-l" id="view-details-heading">{{ pageTitle }}</h1>
      {% if isInternalUser %}
    {{ appApplicationDetailsCard({
      applicationReference: applicationReference,
      dateSubmitted: submittedAt,
      isReadOnly: isReadOnly
    }) }}
      {% endif %}
    {% if mcmsContext %}
    {{ appProjectDetailsCard({
      projectName: projectName,
      mcmsContext: mcmsContext,
      isReadOnly: isReadOnly,
      isInternalUser: isInternalUser
    }) }}
    {% endif %}
    {{ appActivityDatesCard({
      activityDates: activityDates,
      isReadOnly: isReadOnly
    }) }}
    {{ appActivityDetailsCard({
      activityDescription: activityDescription,
      isReadOnly: isReadOnly
    }) }}
    {{ appSiteDetailsCard({
      siteDetails: siteDetails,
      isReadOnly: isReadOnly
    }) }}
    {{ appPublicRegisterCard({
      publicRegister: publicRegister,
      isReadOnly: isReadOnly
    }) }}

    </div>
  </div>
{% endblock %}
